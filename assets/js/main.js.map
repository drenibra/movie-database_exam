{"version":3,"sources":["app.js"],"names":["$","document","ready","getPopularMovies","on","e","getMovies","val","preventDefault","apiKey","popularMoviesApi","output","popularMoviesOutput","searchText","type","year","genre","ratings","url","axios","get","then","response","movies","data","Search","each","index","movie","imdbID","movieRating","Ratings","split","Genre","toLowerCase","includes","renderOutput","Poster","Title","Type","Year","html","catch","err","console","log","count","results","forEach","poster","poster_path","original_title","replace","owlCarousel","loop","margin","autoplay","autoplayTimeout","lazyLoad","autoplayHoverPause","nav","responsive","0","items","767","1000","title","capitalize","s","charAt","toUpperCase","slice","movieSelected","id","sessionStorage","setItem","window","location","getMovie","getItem","Released","Rated","imdbRating","Director","Writer","Actors","Plot"],"mappings":"AAAAA,EAAAC,UAAAC,OAAA,KACAC,mBACAH,EAAA,eAAAI,GAAA,UAAAC,IAMAC,UALAN,EAAA,eAAAO,MACAP,EAAA,SAAAO,MACAP,EAAA,SAAAO,MACAP,EAAA,UAAAO,MACAP,EAAA,YAAAO,OAEAF,EAAAG,uBAIA,MAAAC,OAAA,WACAC,iBAAA,mCACA,IAAAC,OACAC,oBAEA,SAAAN,UAAAO,EAAAC,EAAAC,EAAAC,EAAAC,GACA,IAAAC,EAAA,8CAAAH,IACAI,MAAAC,IAAA,GAAAF,OAAAL,UAAAC,KACAO,MAAAC,IACA,IAAAC,EAAAD,EAAAE,KAAAC,OACAd,OAAA,GACAX,EAAA0B,KAAAH,GAAA,CAAAI,EAAAC,KACA,IAAAV,EAAA,8CAAAU,EAAAC,SACAV,MAAAC,IAAA,GAAAF,KACAG,MAAAC,IACA,IAAAM,EAAAN,EAAAE,KACAM,EAAAF,EAAAG,QAAA,GAAA,MAAAC,MAAA,KAAA,GACAJ,EAAAK,MAAAC,cAAAC,SAAAnB,EAAAkB,iBAAAjB,GAAAa,GAAA,IAAAb,IACAmB,aAAAR,EAAAS,OAAAT,EAAAU,MAAAV,EAAAW,KAAAX,EAAAY,KAAAZ,EAAAC,cAKA7B,EAAA,WAAAyC,KAAA9B,WAEA+B,OAAAC,IACAC,QAAAC,IAAA,MAIA,SAAA1C,mBACA,IAAAe,EAAA,sDAAAR,yCACAS,MAAAC,IAAAF,GACAG,MAAAC,IACA,IAAAwB,EAAA,EACAxB,EAAAE,KAAAuB,QACAC,SAAApB,IACAkB,IACA,IAAAG,EAAA,kCAAArB,EAAAsB,YACAJ,GAAA,KACAlC,qBAAA,4EAEAqC,4BAAArB,EAAAuB,wEAMAnD,EAAA,wBAAAyC,KAAA7B,qBACA,IAAAwC,EAAApD,EAAA,wBAAAyC,OAAAW,QAAA,YAAA,IACApD,EAAA,wBAAAyC,KAAAW,GACApD,EAAA,iBAAAqD,YAAA,CACAC,MAAA,EACAC,OAAA,GACAC,UAAA,EACAC,gBAAA,IACAC,UAAA,EACAC,oBAAA,EACAC,KAAA,EACAC,WAAA,CACAC,EAAA,CACAC,MAAA,GAEAC,IAAA,CACAD,MAAA,GAEAE,IAAA,CACAF,MAAA,SAOA,SAAA3B,aAAAa,EAAAiB,EAAApD,EAAAC,EAAAc,GACAlB,QAAA,2IAGAkB,uCAAAoB,WAAAiB,+FAEAA,0FAEAC,WAAArD,+GAEAC,6EAEAc,0GAIA7B,EAAA,WAAAyC,KAAA9B,QAGA,MAAAwD,WAAAC,GACA,iBAAAA,EAAA,GACAA,EAAAC,OAAA,GAAAC,cAAAF,EAAAG,MAAA,GAIA,SAAAC,cAAAC,GAGA,OAFAC,eAAAC,QAAA,UAAAF,GACAG,OAAAC,SAAA,cACA,EAGA,SAAAC,WAEA,IAAA5D,EAAA,8CADAwD,eAAAK,QAAA,aAEA5D,MAAAC,IAAA,GAAAF,KACAG,MAAAC,IACAsB,QAAAC,IAAAvB,GACA,IAAAM,EAAAN,EAAAE,KAEAb,EAAA,2JAIAiB,EAAAS,gBAAAT,EAAAU,6IAGAV,EAAAU,gJAEAV,EAAAK,kGACAL,EAAAoD,kGACApD,EAAAqD,qGACArD,EAAAsD,uGACAtD,EAAAuD,mGACAvD,EAAAwD,iGACAxD,EAAAyD,qPAOAzD,EAAA0D,2HAEA1D,EAAAC,0NAOA7B,EAAA,UAAAyC,KAAA9B,MAEA+B,OAAAC,IACAC,QAAAC,IAAA","file":"all.js","sourcesContent":["$(document).ready(() => {\r\n    getPopularMovies();\r\n    $('#searchForm').on('submit', (e) => {\r\n        let searchText = $('#searchText').val();\r\n        let type = $('#type').val();\r\n        let year = $('#year').val();\r\n        let genre = $('#genre').val();\r\n        let ratings = $('#ratings').val();\r\n        getMovies(searchText, type, year, genre, ratings);\r\n        e.preventDefault();\r\n    });\r\n});\r\n\r\nconst apiKey = '66e34c42',\r\n    popularMoviesApi = '4e4c856e030c60ca3dc206cecae8f96f';\r\nlet output;\r\nlet popularMoviesOutput;\r\n\r\nfunction getMovies(searchText, type, year, genre, ratings) {\r\n    var url = `https://www.omdbapi.com/?apikey=${apiKey}&y=${year}`;\r\n    axios.get(`${url}&s=${searchText}&type=${type}`)\r\n    .then((response) => {\r\n        let movies = response.data.Search;\r\n        output = '';\r\n        $.each(movies, (index, movie) => {\r\n            var url = `https://www.omdbapi.com/?apikey=${apiKey}&i=${movie.imdbID}`;\r\n            axios.get(`${url}`)\r\n                .then((response) => {\r\n                    let movie = response.data;\r\n                    let movieRating = (movie.Ratings[0].Value).split('/')[0];\r\n                    if (movie.Genre.toLowerCase().includes(genre.toLowerCase()) && (ratings <= movieRating || ratings == '')) {\r\n                        renderOutput(movie.Poster, movie.Title, movie.Type, movie.Year, movie.imdbID);\r\n                    }\r\n                })\r\n        });\r\n\r\n        $('#movies').html(output);\r\n    })\r\n    .catch((err) => {\r\n        console.log((err));\r\n    })\r\n}\r\n\r\nfunction getPopularMovies() {\r\n    var url = `https://api.themoviedb.org/3/movie/popular?api_key=${popularMoviesApi}&language=en-US&page=1`;\r\n    axios.get(url)\r\n    .then((response) => {\r\n        let count = 0;\r\n        let popularMovies = response.data.results;\r\n        popularMovies.forEach((movie) => {\r\n            count++;\r\n            let poster = 'https://image.tmdb.org/t/p/w500' + movie.poster_path;\r\n            if (count <= 20) {\r\n                popularMoviesOutput += `\r\n                <div class=\"item\">\r\n                    <img data-src=\"${poster}\" class=\"owl-lazy\" alt=\"${movie.original_title}-poster\">\r\n                </div>\r\n                `;\r\n            }\r\n\r\n        })\r\n        $('#popularMoviesOutput').html(popularMoviesOutput);\r\n        var replace = $('#popularMoviesOutput').html().replace('undefined', '');\r\n        $('#popularMoviesOutput').html(replace);\r\n        $('.owl-carousel').owlCarousel({\r\n            loop:true,\r\n            margin:10,\r\n            autoplay: true,\r\n            autoplayTimeout:4000,\r\n            lazyLoad: true,\r\n            autoplayHoverPause:true,\r\n            nav:true,\r\n            responsive:{\r\n                0:{\r\n                    items:2\r\n                },\r\n                767:{\r\n                    items:3\r\n                },\r\n                1000:{\r\n                    items:5\r\n                }\r\n            }\r\n        })\r\n    })\r\n}\r\n\r\nfunction renderOutput(poster, title, type, year, imdbID) {\r\n    output += `\r\n    <div class=\"col-lg-3 col-md-4 col-sm-6 col-12\">\r\n        <div class=\"card mb-5\">\r\n            <a href=\"#\" onclick=\"movieSelected('${imdbID}')\"><img class=\"card-img-top\" src=\"${poster}\" alt=\"${title}-Poster\"></a>\r\n            <div class=\"card-body\">\r\n                <h5 class=\"card-title\">${title}</h5>\r\n                <div class=\"d-flex\">\r\n                    <p class=\"card-text\">${capitalize(type)}</p>\r\n                    <span class=\"px-2\">â€¢</span>\r\n                    <p class=\"card-text\">Released: ${year}</p>\r\n                </div>\r\n                <a onclick=\"movieSelected('${imdbID}')\" class=\"btn btn-primary\" href=\"#\">Movie Details</a>\r\n            </div>\r\n        </div>\r\n    </div>`;\r\n    $('#movies').html(output);\r\n}\r\n\r\nconst capitalize = (s) => {\r\n    if (typeof s !== 'string') return ''\r\n    return s.charAt(0).toUpperCase() + s.slice(1)\r\n}  \r\n\r\n\r\nfunction movieSelected(id) {\r\n    sessionStorage.setItem('movieId', id);\r\n    window.location = 'movie.html';\r\n    return false;\r\n}\r\n\r\nfunction getMovie() {\r\n    let movieId  = sessionStorage.getItem('movieId');\r\n    var url = `https://www.omdbapi.com/?apikey=${apiKey}&i=${movieId}`;\r\n    axios.get(`${url}`)\r\n        .then((response) => {\r\n            console.log(response);\r\n            let movie = response.data;\r\n\r\n            let output = `\r\n            <div class=\"container\">\r\n                <div class=\"row\">\r\n                    <div class=\"col-lg-4\">\r\n                        <img src=\"${movie.Poster}\" alt=\"${movie.Title}-Poster\" class=\"thumbnail\">\r\n                        </div>\r\n                    <div class=\"col-lg-8\">\r\n                        <h2>${movie.Title}</h2>\r\n                        <ul class=\"list-group\">\r\n                            <li class=\"list-group-item\"><strong>Genre:</strong> ${movie.Genre}</li>\r\n                            <li class=\"list-group-item\"><strong>Released:</strong> ${movie.Released}</li>\r\n                            <li class=\"list-group-item\"><strong>Rated:</strong> ${movie.Rated}</li>\r\n                            <li class=\"list-group-item\"><strong>IMDB Rating:</strong> ${movie.imdbRating}</li>\r\n                            <li class=\"list-group-item\"><strong>Director:</strong> ${movie.Director}</li>\r\n                            <li class=\"list-group-item\"><strong>Writer:</strong> ${movie.Writer}</li>\r\n                            <li class=\"list-group-item\"><strong>Actors:</strong> ${movie.Actors}</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div class=\"row mt-3\">\r\n                    <div class=\"well\">\r\n                        <h3>Plot</h3>\r\n                        <p>${movie.Plot}</p>\r\n                        <hr>\r\n                        <a class=\"btn btn-primary\" href=\"https://imdb.com/title/${movie.imdbID}\" target=\"_blank\">View IMDB</a>\r\n                        <a class=\"btn btn-default\" href=\"index.html\">Go Back to Search</a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            `;\r\n\r\n            $('#movie').html(output);\r\n        })\r\n        .catch((err) => {\r\n            console.log((err));\r\n        })\r\n}"]}