$(document).ready((()=>{getPopularMovies(),$("#searchForm").on("submit",(t=>{getMovies($("#searchText").val(),$("#type").val(),$("#year").val(),$("#genre").val(),$("#ratings").val()),t.preventDefault()}))}));const apiKey="66e34c42",popularMoviesApi="4e4c856e030c60ca3dc206cecae8f96f";let output,popularMoviesOutput;function getMovies(t,e,a,i,s){var o=`https://www.omdbapi.com/?apikey=66e34c42&y=${a}`;axios.get(`${o}&s=${t}&type=${e}`).then((t=>{let e=t.data.Search;output="",$.each(e,((t,e)=>{var a=`https://www.omdbapi.com/?apikey=66e34c42&i=${e.imdbID}`;axios.get(`${a}`).then((t=>{let e=t.data,a=e.Ratings[0].Value.split("/")[0];e.Genre.toLowerCase().includes(i.toLowerCase())&&(s<=a||""==s)&&renderOutput(e.Poster,e.Title,e.Type,e.Year,e.imdbID)}))})),$("#movies").html(output)})).catch((t=>{console.log(t)}))}function getPopularMovies(){var t=`https://api.themoviedb.org/3/movie/popular?api_key=${popularMoviesApi}&language=en-US&page=1`;axios.get(t).then((t=>{let e=0;t.data.results.forEach((t=>{e++;let a="https://image.tmdb.org/t/p/w500"+t.poster_path;e<=20&&(popularMoviesOutput+=`\n                <div class="item">\n                <img src="${a}" loading="lazy" alt="${t.original_title}-poster">\n                </div>\n                `)})),$("#popularMoviesOutput").html(popularMoviesOutput);var a=$("#popularMoviesOutput").html().replace("undefined","");$("#popularMoviesOutput").html(a),$(".owl-carousel").owlCarousel({loop:!0,margin:10,autoplay:!0,autoplayTimeout:4e3,lazyLoad:!0,autoplayHoverPause:!0,nav:!0,responsive:{0:{items:2},767:{items:3},1e3:{items:5}}})}))}function renderOutput(t,e,a,i,s){output+=`\n    <div class="col-lg-3 col-md-4 col-sm-6 col-12">\n        <div class="card mb-5">\n            <a href="#" onclick="movieSelected('${s}')"><img class="card-img-top" src="${t}" alt="${e}-Poster"></a>\n            <div class="card-body">\n                <h5 class="card-title">${e}</h5>\n                <div class="d-flex">\n                    <p class="card-text">${capitalize(a)}</p>\n                    <span class="px-2">â€¢</span>\n                    <p class="card-text">Released: ${i}</p>\n                </div>\n                <a onclick="movieSelected('${s}')" class="btn btn-primary" href="#">Movie Details</a>\n            </div>\n        </div>\n    </div>`,$("#movies").html(output)}const capitalize=t=>"string"!=typeof t?"":t.charAt(0).toUpperCase()+t.slice(1);function movieSelected(t){return sessionStorage.setItem("movieId",t),window.location="movie.html",!1}function getMovie(){var t=`https://www.omdbapi.com/?apikey=66e34c42&i=${sessionStorage.getItem("movieId")}`;axios.get(`${t}`).then((t=>{console.log(t);let e=t.data,a=`\n            <div class="container">\n                <div class="row">\n                    <div class="col-lg-4">\n                        <img src="${e.Poster}" alt="${e.Title}-Poster" class="thumbnail">\n                        </div>\n                    <div class="col-lg-8">\n                        <h2>${e.Title}</h2>\n                        <ul class="list-group">\n                            <li class="list-group-item"><strong>Genre:</strong> ${e.Genre}</li>\n                            <li class="list-group-item"><strong>Released:</strong> ${e.Released}</li>\n                            <li class="list-group-item"><strong>Rated:</strong> ${e.Rated}</li>\n                            <li class="list-group-item"><strong>IMDB Rating:</strong> ${e.imdbRating}</li>\n                            <li class="list-group-item"><strong>Director:</strong> ${e.Director}</li>\n                            <li class="list-group-item"><strong>Writer:</strong> ${e.Writer}</li>\n                            <li class="list-group-item"><strong>Actors:</strong> ${e.Actors}</li>\n                        </ul>\n                    </div>\n                </div>\n                <div class="row mt-3">\n                    <div class="well">\n                        <h3>Plot</h3>\n                        <p>${e.Plot}</p>\n                        <hr>\n                        <a class="btn btn-primary" href="https://imdb.com/title/${e.imdbID}" target="_blank">View IMDB</a>\n                        <a class="btn btn-default" href="index.html">Go Back to Search</a>\n                    </div>\n                </div>\n            </div>\n            `;$("#movie").html(a)})).catch((t=>{console.log(t)}))}
